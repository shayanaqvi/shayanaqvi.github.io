<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="icon" type="image/x-icon" href="../favicon.svg">
  <link rel="stylesheet" , href="../styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="a bit about patching the Dynamic Window Manager (DWM)">
  <title>Patching DWM | Shayan Naqvi</title>
</head>

<body>

  <div id="container">

    <div id="header">
      <p><a href="../index.html">Home</a><a href="../blog.html">Blog</a><a href="../works.html">Works</a></p>
    </div>

    <div id="content-container">
      <h1>Patching DWM</h1>
      <p>Patching DWM is incredibly finicky if you choose to use auto-patching programs. Manual patching is the way to
        go!</p>

      <p>I'm going to be applying this patch here: <a
          href="https://dwm.suckless.org/patches/focusonnetactive/">focusonnetactive</a>.</p>

      <p>Let's first acquire the patch itself. I'll save it to a <code>patches</code> directory where my
        DWM source code is located.</p>

      <p>The deal with patching manually is being able to read diff files. It's not too difficult, but any formatting is
        nice to have. I use <code>bat</code>, and this gives me a good idea of what needs to be done.</p>

      <figure>
        <img src="./media/patchingdwm1.png">
      </figure>

      <p>The stuff in green is what we need to add. The stuff in red is what we need to remove. The file in which this
        needs to be done is also specified, in this case, <code>dwm.c</code>.</p>

      <p>If you look closely, they've specified at which line things need to be added. In the first case, it's around
        line 514. Go there, then see what matches whatever they've specified.</p>

      <figure>
        <img src="./media/patchingdwm2.png">
      </figure>

      <p>It's not an exact match, but we can see the region we need to change is just below it. I've added the new line
        there.</p>

      <p>Rinse and repeat for the rest.</p>

      <p>When you're done, simply rebuild your <code>dwm.c</code> again. It'll tell you if you have any errors. If you
        do, they'll likely be minor syntax errors. Read through the output, it's pretty clear.</p>

      <figure>
        <img src="./media/patchingdwm3.png">
        <figcaption>unisigned integer wow</figcaption>
      </figure>

      <p>You might start to get an idea as to why auto-patching programs tend to get really finicky after a while,
        mostly after you've applied patches. They just insert the code at whatever line is specified in the diff file,
        which may break syntax or logic, that sort of thing. Auto-patching works fine for the first few patches, but
        especially on excessively patched DWM configurations, they tend to just not work.</p>

      <p>Anyway, that's the first patch I've applied since I went back to DWM. It's been about a month.</p>

      <p class="closing">This article was written on 20/06/2024. If you have any thoughts, feel free to send me an email
        with them. Have a nice day!</p>
    </div>

  </div>

</body>

</html>